<!DOCTYPE html>
<html>
	<style> 
		#audio{ 
			display: none;
		}
	</style> 
	<head>
		<meta charset=utf-8>
		<title>CMMND EP X Creative Labs</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
		<audio id="audio" controls>
			<source src="./assets/audio/theWay.mp3" type="audio/mpeg">
		</audio> 
	</head>
	<body>
        <!-- Load libs -->
		<script src="src/three.js"></script>
		<script src="src/OrbitControls.js"></script>
		<script src="scenes/SampleScene.js"></script>
		
		<script>
			/* initial song */ 
			var AudioContext = AudioContext || webkitAudioContext;
			var theway = document.getElementById('audio');		
			audio.load();
			audio.play();
			var context = new AudioContext;
			var analyser = context.createAnalyser();
			var source = context.createMediaElementSource(theway);
			source.connect(analyser); 
			analyser.connect(context.destination);
			analyser.smoothingTimeConstant = .8;
			analyser.fftSize = 1024;

			var bufferlen = analyser.frequencyBinCount;
			var pitch_array = new Uint8Array(bufferlen);
			var volume_array = new Uint8Array(bufferlen);
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
			var controls = new THREE.OrbitControls(camera);
			controls.zoomSpeed = .5;
			controls.minAzimuthAngle = - Math.PI/2;
			controls.maxAzimuthAngle = Math.PI/2;
			controls.enablePan = true;
			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );


			initScene();
			animate();

		</script>
		</script>
	</body>
</html>